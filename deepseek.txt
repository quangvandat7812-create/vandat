-- âœˆï¸ Fly Script (Safe)
-- For your own Roblox game

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local humanoid = char:WaitForChild("Humanoid")

local flying = false
local speed = 60

local bv, bg
local move = {f=0,b=0,l=0,r=0,u=0,d=0}

-- Báº¯t phÃ­m
UIS.InputBegan:Connect(function(input,gp)
	if gp then return end
	if input.KeyCode == Enum.KeyCode.F then
		flying = not flying

		if flying then
			humanoid.PlatformStand = true

			bv = Instance.new("BodyVelocity", hrp)
			bv.MaxForce = Vector3.new(1e9,1e9,1e9)

			bg = Instance.new("BodyGyro", hrp)
			bg.MaxTorque = Vector3.new(1e9,1e9,1e9)
			bg.P = 9e4
		else
			humanoid.PlatformStand = false
			if bv then bv:Destroy() end
			if bg then bg:Destroy() end
		end
	end

	if input.KeyCode == Enum.KeyCode.W then move.f=1 end
	if input.KeyCode == Enum.KeyCode.S then move.b=1 end
	if input.KeyCode == Enum.KeyCode.A then move.l=1 end
	if input.KeyCode == Enum.KeyCode.D then move.r=1 end
	if input.KeyCode == Enum.KeyCode.Space then move.u=1 end
	if input.KeyCode == Enum.KeyCode.LeftControl then move.d=1 end
end)

UIS.InputEnded:Connect(function(input)
	if input.KeyCode == Enum.KeyCode.W then move.f=0 end
	if input.KeyCode == Enum.KeyCode.S then move.b=0 end
	if input.KeyCode == Enum.KeyCode.A then move.l=0 end
	if input.KeyCode == Enum.KeyCode.D then move.r=0 end
	if input.KeyCode == Enum.KeyCode.Space then move.u=0 end
	if input.KeyCode == Enum.KeyCode.LeftControl then move.d=0 end
end)

-- Bay
RunService.RenderStepped:Connect(function()
	if flying and bv and bg then
		local cam = workspace.CurrentCamera
		local dir =
			(cam.CFrame.LookVector * (move.f - move.b)) +
			(cam.CFrame.RightVector * (move.r - move.l)) +
			(Vector3.new(0,1,0) * (move.u - move.d))

		bv.Velocity = dir * speed
		bg.CFrame = cam.CFrame
	end
end)

print("âœˆï¸ Fly Script Loaded")    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Parent = mainFrame
    
    btn.MouseButton1Click:Connect(function()
        Settings.SelectedMob = mob
        farmToggle.Text = "ðŸ”° Auto Farm: " .. mob
    end)
    
    yPos = yPos + 0.07
end

-- Sea 2 Mobs
local sea2Label = Instance.new("TextLabel")
sea2Label.Text = "=== SEA 2 ==="
sea2Label.Size = UDim2.new(0.9, 0, 0, 25)
sea2Label.Position = UDim2.new(0.05, 0, 0.55, 0)
sea2Label.BackgroundColor3 = Color3.fromRGB(0, 120, 80)
sea2Label.TextColor3 = Color3.fromRGB(255, 255, 255)
sea2Label.Parent = mainFrame

local mobsSea2 = {"Raider", "Mercenary", "Snow Bandit", "Chief Petty Officer"}
yPos = 0.61

for i, mob in pairs(mobsSea2) do
    local btn = Instance.new("TextButton")
    btn.Text = "ðŸŽ¯ " .. mob
    btn.Size = UDim2.new(0.9, 0, 0, 35)
    btn.Position = UDim2.new(0.05, 0, yPos, 0)
    btn.BackgroundColor3 = Color3.fromRGB(60, 100, 60)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Parent = mainFrame
    
    btn.MouseButton1Click:Connect(function()
        Settings.SelectedMob = mob
        farmToggle.Text = "ðŸ”° Auto Farm: " .. mob
    end)
    
    yPos = yPos + 0.07
end

-- Sea 3 Mobs
local sea3Label = Instance.new("TextLabel")
sea3Label.Text = "=== SEA 3 ==="
sea3Label.Size = UDim2.new(0.9, 0, 0, 25)
sea3Label.Position = UDim2.new(0.05, 0, 0.8, 0)
sea3Label.BackgroundColor3 = Color3.fromRGB(120, 0, 80)
sea3Label.TextColor3 = Color3.fromRGB(255, 255, 255)
sea3Label.Parent = mainFrame

local mobsSea3 = {"Pirate Millionaire", "Dragon Crew", "Fishman"}
yPos = 0.86

for i, mob in pairs(mobsSea3) do
    local btn = Instance.new("TextButton")
    btn.Text = "ðŸŽ¯ " .. mob
    btn.Size = UDim2.new(0.9, 0, 0, 35)
    btn.Position = UDim2.new(0.05, 0, yPos, 0)
    btn.BackgroundColor3 = Color3.fromRGB(100, 60, 100)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Parent = mainFrame
    
    btn.MouseButton1Click:Connect(function()
        Settings.SelectedMob = mob
        farmToggle.Text = "ðŸ”° Auto Farm: " .. mob
    end)
    
    yPos = yPos + 0.07
end

-- Auto Farm Function
function StartAutoFarm()
    spawn(function()
        while Settings.AutoFarm do
            local nearestMob = nil
            local nearestDist = 100
            
            for _, mob in pairs(Workspace.Enemies:GetChildren()) do
                if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                    if Settings.SelectedMob == "" or string.find(mob.Name, Settings.SelectedMob) then
                        local dist = (RootPart.Position - mob.HumanoidRootPart.Position).Magnitude
                        if dist < nearestDist then
                            nearestMob = mob
                            nearestDist = dist
                        end
                    end
                end
            end
            
            if nearestMob then
                Character:WaitForChild("Humanoid"):MoveTo(nearestMob.HumanoidRootPart.Position)
                wait(0.3)
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AttackButton")
            else
                -- Tá»± Ä‘á»™ng tÃ¬m mob gáº§n nháº¥t náº¿u khÃ´ng cÃ³ mob Ä‘Æ°á»£c chá»n
                if Settings.SelectedMob == "" then
                    for _, mob in pairs(Workspace.Enemies:GetChildren()) do
                        if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                            local dist = (RootPart.Position - mob.HumanoidRootPart.Position).Magnitude
                            if dist < nearestDist then
                                nearestMob = mob
                                nearestDist = dist
                            end
                        end
                    end
                end
            end
            
            wait(0.1)
        end
    end)
end

-- Close Button
local closeBtn = Instance.new("TextButton")
closeBtn.Text = "âŒ"
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -30, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.Parent = mainFrame

closeBtn.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Drag GUI
local dragging, dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

print("Blox Fruits Auto All Sea Loaded!")
