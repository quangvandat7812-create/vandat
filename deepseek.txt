-- ðŸŒ BANANA HUB | FULL ALL DEMO (SAFE)
-- UI + Logo + Auto Attack + Auto Farm + Aim + Aim FOV + ESP
-- Chá»‰ dÃ¹ng cho game cá»§a báº¡n

-------------------------
-- SERVICES
-------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

-------------------------
-- STATES
-------------------------
_G.AutoAttack = false
_G.AutoFarm   = false
_G.Aim        = false
_G.AimFOV     = false
_G.ESP        = false

-------------------------
-- CONFIG
-------------------------
local RANGE       = 20
local AIM_PART    = "Head"
local SMOOTH      = 0.15
local FARM_OFFSET = CFrame.new(0,0,-3)

-------------------------
-- GUI
-------------------------
local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.Name = "BananaHub"

local main = Instance.new("Frame", gui)
main.Size = UDim2.fromScale(0.45,0.55)
main.Position = UDim2.fromScale(0.275,0.2)
main.BackgroundColor3 = Color3.fromRGB(18,18,18)
main.Active = true
main.Draggable = true
main.BorderSizePixel = 0
Instance.new("UICorner", main).CornerRadius = UDim.new(0,18)

-- LOGO
local logo = Instance.new("ImageLabel", main)
logo.Size = UDim2.fromScale(0.16,0.16)
logo.Position = UDim2.fromScale(0.02,0.02)
logo.BackgroundTransparency = 1
logo.Image = "rbxassetid://83592774650890" -- ðŸ”´ Ä‘á»•i ID logo cá»§a báº¡n
Instance.new("UICorner", logo).CornerRadius = UDim.new(1,0)

-- TITLE
local title = Instance.new("TextLabel", main)
title.Position = UDim2.fromScale(0.22,0)
title.Size = UDim2.fromScale(0.78,0.12)
title.BackgroundTransparency = 1
title.Text = "ðŸŒ Banana Hub | FULL DEMO"
title.TextScaled = true
title.TextXAlignment = Enum.TextXAlignment.Left
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.fromRGB(255,225,0)

-------------------------
-- TAB BAR
-------------------------
local tabBar = Instance.new("Frame", main)
tabBar.Position = UDim2.fromScale(0,0.12)
tabBar.Size = UDim2.fromScale(1,0.12)
tabBar.BackgroundTransparency = 1

local function tabBtn(text,x)
	local b = Instance.new("TextButton", tabBar)
	b.Size = UDim2.fromScale(0.3,0.9)
	b.Position = UDim2.fromScale(x,0.05)
	b.Text = text
	b.TextScaled = true
	b.Font = Enum.Font.GothamBold
	b.BackgroundColor3 = Color3.fromRGB(35,35,35)
	b.TextColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,12)
	return b
end

local combatTab = tabBtn("âš” Combat",0.03)
local farmTab   = tabBtn("ðŸŒ¾ Farm",0.35)
local espTab    = tabBtn("ðŸ‘ ESP",0.67)

-------------------------
-- PAGES
-------------------------
local function page()
	local f = Instance.new("Frame", main)
	f.Position = UDim2.fromScale(0,0.24)
	f.Size = UDim2.fromScale(1,0.76)
	f.BackgroundTransparency = 1
	f.Visible = false
	return f
end

local combatPage = page()
local farmPage   = page()
local espPage    = page()
combatPage.Visible = true

-------------------------
-- TOGGLE BUTTON
-------------------------
local function toggle(parent,text,y,cb)
	local b = Instance.new("TextButton", parent)
	b.Size = UDim2.fromScale(0.8,0.18)
	b.Position = UDim2.fromScale(0.1,y)
	b.Text = text.." : OFF"
	b.TextScaled = true
	b.Font = Enum.Font.GothamBold
	b.BackgroundColor3 = Color3.fromRGB(40,40,40)
	b.TextColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,14)

	local on = false
	b.MouseButton1Click:Connect(function()
		on = not on
		b.Text = text.." : "..(on and "ON" or "OFF")
		cb(on)
	end)
end

-- COMBAT
toggle(combatPage,"Auto Attack",0.1,function(v) _G.AutoAttack=v end)
toggle(combatPage,"Aim Assist",0.35,function(v) _G.Aim=v end)
toggle(combatPage,"Aim FOV Circle",0.6,function(v) _G.AimFOV=v end)

-- FARM
toggle(farmPage,"Auto Farm",0.1,function(v) _G.AutoFarm=v end)

-- ESP
toggle(espPage,"ESP",0.1,function(v) _G.ESP=v end)

-------------------------
-- TAB SWITCH
-------------------------
local function show(p)
	combatPage.Visible=false
	farmPage.Visible=false
	espPage.Visible=false
	p.Visible=true
end
combatTab.MouseButton1Click:Connect(function() show(combatPage) end)
farmTab.MouseButton1Click:Connect(function() show(farmPage) end)
espTab.MouseButton1Click:Connect(function() show(espPage) end)

-------------------------
-- AIM FOV CIRCLE
-------------------------
local FOV_RADIUS = 120
local circle = Drawing.new("Circle")
circle.Radius = FOV_RADIUS
circle.Color = Color3.fromRGB(255,255,0)
circle.Thickness = 2
circle.Filled = false
circle.Visible = false

RunService.RenderStepped:Connect(function()
	circle.Position = Vector2.new(
		camera.ViewportSize.X/2,
		camera.ViewportSize.Y/2
	)
	circle.Visible = _G.AimFOV
end)

-------------------------
-- TARGET (NORMAL)
-------------------------
local function getTarget()
	local nearest,dist=nil,math.huge
	for _,v in pairs(workspace:GetChildren()) do
		if v:IsA("Model") and v~=char
			and v:FindFirstChild("Humanoid")
			and v:FindFirstChild("HumanoidRootPart")
			and v.Humanoid.Health>0 then
			local d=(hrp.Position-v.HumanoidRootPart.Position).Magnitude
			if d<dist and d<=RANGE then
				dist=d
				nearest=v
			end
		end
	end
	return nearest
end

-------------------------
-- TARGET (FOV)
-------------------------
local function getTargetInFOV()
	local nearest,dist=nil,math.huge
	local center = Vector2.new(
		camera.ViewportSize.X/2,
		camera.ViewportSize.Y/2
	)
	for _,v in pairs(workspace:GetChildren()) do
		if v:IsA("Model") and v~=char
			and v:FindFirstChild("Humanoid")
			and v:FindFirstChild(AIM_PART)
			and v.Humanoid.Health>0 then
			local pos,ok=camera:WorldToViewportPoint(v[AIM_PART].Position)
			if ok then
				local m=(Vector2.new(pos.X,pos.Y)-center).Magnitude
				if m<FOV_RADIUS and m<dist then
					dist=m
					nearest=v
				end
			end
		end
	end
	return nearest
end

-------------------------
-- ESP SIMPLE
-------------------------
local ESPs={}
local function createESP(m)
	if ESPs[m] then return end
	local bb=Instance.new("BillboardGui",m)
	bb.Size=UDim2.new(0,200,0,40)
	bb.AlwaysOnTop=true
	bb.Adornee=m.HumanoidRootPart
	local t=Instance.new("TextLabel",bb)
	t.Size=UDim2.new(1,0,1,0)
	t.BackgroundTransparency=1
	t.TextScaled=true
	t.Font=Enum.Font.GothamBold
	t.TextColor3=Color3.fromRGB(255,80,80)
	t.Text=m.Name
	ESPs[m]=bb
end
local function removeESP(m)
	if ESPs[m] then ESPs[m]:Destroy() ESPs[m]=nil end
end

-------------------------
-- MAIN LOOP
-------------------------
RunService.RenderStepped:Connect(function()
	local target = _G.AimFOV and getTargetInFOV() or getTarget()

	if _G.AutoFarm and target then
		hrp.CFrame = target.HumanoidRootPart.CFrame * FARM_OFFSET
	end

	if _G.AutoAttack and target then
		local tool = char:FindFirstChildOfClass("Tool")
		if tool then tool:Activate() end
	end

	if _G.Aim and target and target:FindFirstChild(AIM_PART) then
		local cf=camera.CFrame
		camera.CFrame = cf:Lerp(
			CFrame.new(cf.Position,target[AIM_PART].Position),
			SMOOTH
		)
	end

	for _,v in pairs(workspace:GetChildren()) do
		if v:IsA("Model") and v~=char
			and v:FindFirstChild("Humanoid")
			and v:FindFirstChild("HumanoidRootPart")
			and v.Humanoid.Health>0 then
			if _G.ESP then createESP(v) else removeESP(v) end
		end
	end
end)        Settings.SelectedMob = mob
        farmToggle.Text = "ðŸ”° Auto Farm: " .. mob
    end)
    
    yPos = yPos + 0.07
end

-- Sea 2 Mobs
local sea2Label = Instance.new("TextLabel")
sea2Label.Text = "=== SEA 2 ==="
sea2Label.Size = UDim2.new(0.9, 0, 0, 25)
sea2Label.Position = UDim2.new(0.05, 0, 0.55, 0)
sea2Label.BackgroundColor3 = Color3.fromRGB(0, 120, 80)
sea2Label.TextColor3 = Color3.fromRGB(255, 255, 255)
sea2Label.Parent = mainFrame

local mobsSea2 = {"Raider", "Mercenary", "Snow Bandit", "Chief Petty Officer"}
yPos = 0.61

for i, mob in pairs(mobsSea2) do
    local btn = Instance.new("TextButton")
    btn.Text = "ðŸŽ¯ " .. mob
    btn.Size = UDim2.new(0.9, 0, 0, 35)
    btn.Position = UDim2.new(0.05, 0, yPos, 0)
    btn.BackgroundColor3 = Color3.fromRGB(60, 100, 60)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Parent = mainFrame
    
    btn.MouseButton1Click:Connect(function()
        Settings.SelectedMob = mob
        farmToggle.Text = "ðŸ”° Auto Farm: " .. mob
    end)
    
    yPos = yPos + 0.07
end

-- Sea 3 Mobs
local sea3Label = Instance.new("TextLabel")
sea3Label.Text = "=== SEA 3 ==="
sea3Label.Size = UDim2.new(0.9, 0, 0, 25)
sea3Label.Position = UDim2.new(0.05, 0, 0.8, 0)
sea3Label.BackgroundColor3 = Color3.fromRGB(120, 0, 80)
sea3Label.TextColor3 = Color3.fromRGB(255, 255, 255)
sea3Label.Parent = mainFrame

local mobsSea3 = {"Pirate Millionaire", "Dragon Crew", "Fishman"}
yPos = 0.86

for i, mob in pairs(mobsSea3) do
    local btn = Instance.new("TextButton")
    btn.Text = "ðŸŽ¯ " .. mob
    btn.Size = UDim2.new(0.9, 0, 0, 35)
    btn.Position = UDim2.new(0.05, 0, yPos, 0)
    btn.BackgroundColor3 = Color3.fromRGB(100, 60, 100)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Parent = mainFrame
    
    btn.MouseButton1Click:Connect(function()
        Settings.SelectedMob = mob
        farmToggle.Text = "ðŸ”° Auto Farm: " .. mob
    end)
    
    yPos = yPos + 0.07
end

-- Auto Farm Function
function StartAutoFarm()
    spawn(function()
        while Settings.AutoFarm do
            local nearestMob = nil
            local nearestDist = 100
            
            for _, mob in pairs(Workspace.Enemies:GetChildren()) do
                if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                    if Settings.SelectedMob == "" or string.find(mob.Name, Settings.SelectedMob) then
                        local dist = (RootPart.Position - mob.HumanoidRootPart.Position).Magnitude
                        if dist < nearestDist then
                            nearestMob = mob
                            nearestDist = dist
                        end
                    end
                end
            end
            
            if nearestMob then
                Character:WaitForChild("Humanoid"):MoveTo(nearestMob.HumanoidRootPart.Position)
                wait(0.3)
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AttackButton")
            else
                -- Tá»± Ä‘á»™ng tÃ¬m mob gáº§n nháº¥t náº¿u khÃ´ng cÃ³ mob Ä‘Æ°á»£c chá»n
                if Settings.SelectedMob == "" then
                    for _, mob in pairs(Workspace.Enemies:GetChildren()) do
                        if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                            local dist = (RootPart.Position - mob.HumanoidRootPart.Position).Magnitude
                            if dist < nearestDist then
                                nearestMob = mob
                                nearestDist = dist
                            end
                        end
                    end
                end
            end
            
            wait(0.1)
        end
    end)
end

-- Close Button
local closeBtn = Instance.new("TextButton")
closeBtn.Text = "âŒ"
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -30, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.Parent = mainFrame

closeBtn.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Drag GUI
local dragging, dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

print("Blox Fruits Auto All Sea Loaded!")
